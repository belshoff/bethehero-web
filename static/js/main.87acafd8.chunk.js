(this["webpackJsonpbethehero-web"]=this["webpackJsonpbethehero-web"]||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/heroes.1f4b5508.png"},35:function(e,t,a){e.exports=a(67)},40:function(e,t,a){},41:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),l=(a(40),a(6)),i=a(10),u=a(4),s=a(8),m=(a(41),a(27)),p=a.n(m).a.create({baseURL:"https://api-bethehero.herokuapp.com/v1"}),d=a(9),g=a.n(d),h=a(28),f=a.n(h);function E(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(u.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){localStorage.getItem("ongId")&&e.push("/profile")}),[o]),r.a.createElement("div",{className:"login-container"},r.a.createElement("section",{className:"form"},r.a.createElement("img",{src:g.a,alt:"Herois"}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),p.post("sessions",{id:o}).then((function(t){var a=t.data.name;localStorage.setItem("ongId",o),localStorage.setItem("ongName",a),e.push("/profile")})).catch((function(){alert("Falha no Login.")}))}},r.a.createElement("h1",null,"Login:"),r.a.createElement("input",{placeholder:"Sua ID",value:o,onChange:function(e){c(e.target.value)}}),r.a.createElement("button",{className:"button",type:"submit"},"Entrar"),r.a.createElement(l.b,{className:"back-link",to:"/register"},r.a.createElement(s.b,{size:16,color:"#e02041"})," N\xe3o tenho Cadastro"))),r.a.createElement("img",{src:f.a,alt:"Herois"}))}a(64);function b(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),m=Object(u.a)(c,2),d=m[0],h=m[1],f=Object(n.useState)(""),E=Object(u.a)(f,2),b=E[0],v=E[1],O=Object(n.useState)(""),N=Object(u.a)(O,2),I=N[0],j=N[1],S=Object(n.useState)(""),C=Object(u.a)(S,2),y=C[0],k=C[1],D=Object(i.f)();return r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"content"},r.a.createElement("section",null,r.a.createElement("img",{src:g.a,alt:"Logo"}),r.a.createElement("h1",null,"Cadastro"),r.a.createElement("p",null,"Fa\xe7a seu cadastro, entre na plataforma e ajude a encontrarem os casos da sua ONG."),r.a.createElement(l.b,{className:"back-link",to:"/"},r.a.createElement(s.a,{size:16,color:"#e02041"})," N\xe3o tenho Cadastro")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:a,email:d,whatsapp:b,city:I,uf:y};p.post("ongs",t).then((function(e){alert("Seu ID de acesso: ".concat(e.data.id)),D.push("/")})).catch((function(e){alert("Erro no cadastro, tente novamente.")}))}},r.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)},placeholder:"Nome da ONG"}),r.a.createElement("input",{value:d,onChange:function(e){return h(e.target.value)},type:"email",placeholder:"E-mail"}),r.a.createElement("input",{value:b,onChange:function(e){return v(e.target.value)},type:"tel",placeholder:"Whatsapp",pattern:"[0-9]{2} [9]{1} [0-9]{4}-[0-9]{4}"}),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{value:I,onChange:function(e){return j(e.target.value)},placeholder:"Cidade"}),r.a.createElement("input",{value:y,onChange:function(e){return k(e.target.value)},placeholder:"UF",maxLength:2,style:{width:70,textTransform:"uppercase"}})),r.a.createElement("button",{className:"button",type:"submit"},"Cadastrar"))))}var v=a(31),O=a(32),N=a(33),I=a(34),j=(a(65),function(e){Object(I.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).handleLogout=function(){["ongName","ongId"].forEach((function(e){localStorage.removeItem(e)})),n.props.history.replace("/")},n.handleDeleteIncident=function(e){p.delete("incidents/".concat(e),{headers:{Authorization:localStorage.getItem("ongId")}}).then((function(){var t=n.state,a=t.ongName,r=t.ongId,o=t.incidents;n.setState({ongName:a,ongId:r,incidents:o.filter((function(t){return t.id!==e}))})})).catch((function(e){alert(e.data.error)}))},n.state={ongName:localStorage.getItem("ongName"),ongId:localStorage.getItem("ongId"),incidents:[]},n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("ongId");t?p.get("profile",{headers:{Authorization:t}}).then((function(t){var a=e.state,n=a.ongName,r=a.ongId;e.setState({ongName:n,ongId:r,incidents:t.data})})):this.props.history.replace("/")}},{key:"render",value:function(){var e=this,t=this.state,a=t.ongName,n=t.incidents;return r.a.createElement("div",{className:"profile-container"},r.a.createElement("header",null,r.a.createElement("img",{src:g.a,alt:"Logo"}),r.a.createElement("span",null,"Ol\xe1 ",a,"."),r.a.createElement(l.b,{className:"button",to:"incidents/new"},"Cadastrar novo caso"),r.a.createElement("button",{onClick:this.handleLogout},r.a.createElement(s.c,{size:18,color:"#e02041"}))),r.a.createElement("h1",null," Casos Cadastrados "),r.a.createElement("ul",null,n.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("strong",null,"Caso:"),r.a.createElement("p",null,t.title),r.a.createElement("strong",null,"Descri\xe7\xe3o:"),r.a.createElement("p",null,t.description),r.a.createElement("strong",null,"Valor:"),r.a.createElement("p",null,Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(t.value)),r.a.createElement("button",{onClick:function(){return e.handleDeleteIncident(t.id)}},r.a.createElement(s.d,{size:20,color:"#a8a8b3"})))}))))}}]),a}(r.a.Component));a(66);function S(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(u.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),h=d[0],f=d[1],E=Object(n.useState)(""),b=Object(u.a)(E,2),v=b[0],O=b[1];return Object(n.useEffect)((function(){localStorage.getItem("ongId")||e.push("/")}),[e]),r.a.createElement("div",{className:"new-incident-container"},r.a.createElement("div",{className:"content"},r.a.createElement("section",null,r.a.createElement("img",{src:g.a,alt:"Logo"}),r.a.createElement("h1",null,"Cadastrar novo caso"),r.a.createElement("p",null,"Descreva o caso detalhadamente para encontrar um heroi que resolva isso."),r.a.createElement(l.b,{className:"back-link",to:"/profile"},r.a.createElement(s.a,{size:16,color:"#e02041"})," Voltar para a Home")),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=localStorage.getItem("ongId");p.post("incidents",{title:o,description:h,value:v},{headers:{Authorization:a}}).then((function(){e.push("/profile")})).catch((function(e){var t=e.data.error;alert(void 0===t?"Ocorreu um erro":t)}))}},r.a.createElement("input",{placeholder:"T\xedtulo do Caso",value:o,onChange:function(e){return c(e.target.value)}}),r.a.createElement("textarea",{placeholder:"Descri\xe7\xe3o",value:h,onChange:function(e){return f(e.target.value)}}),r.a.createElement("input",{type:"numeric",placeholder:"Valor em Reais",value:v,onChange:function(e){return O(e.target.value)}}),r.a.createElement("button",{className:"button",type:"submit"},"Cadastrar"))))}function C(){return r.a.createElement(l.a,{basename:"/bethehero-web"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:E}),r.a.createElement(i.a,{path:"/register",component:b}),r.a.createElement(i.a,{path:"/profile",component:j}),r.a.createElement(i.a,{path:"/incidents/new",component:S})))}var y=function(){return r.a.createElement(C,null)};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a.p+"static/media/logo.7eea718b.svg"}},[[35,1,2]]]);
//# sourceMappingURL=main.87acafd8.chunk.js.map